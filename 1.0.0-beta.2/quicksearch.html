<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"node_modules_js-data-adapter_src_index.js.html":{"id":"node_modules_js-data-adapter_src_index.js.html","title":"Source: node_modules/js-data-adapter/src/index.js","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Source: node_modules/js-data-adapter/src/index.js import {utils} from 'js-data' export const noop = function (...args) { const self = this const opts = args[args.length - 1] self.dbg(opts.op, ...args) return utils.resolve() } export const noop2 = function (...args) { const self = this const opts = args[args.length - 2] self.dbg(opts.op, ...args) return utils.resolve() } export const unique = function (array) { const seen = {} const final = [] array.forEach(function (item) { if (item in seen) { return } final.push(item) seen[item] = 0 }) return final } export const withoutRelations = function (mapper, props, opts) { opts || (opts = {}) opts.with || (opts.with = []) const relationFields = mapper.relationFields || [] const toStrip = relationFields.filter(function (value) { return opts.with.indexOf(value) === -1 }) return utils.omit(props, toStrip) } const DEFAULTS = { /** * Whether to log debugging information. * * @name Adapter#debug * @type {boolean} * @default false */ debug: false, /** * Whether to return a more detailed response object. * * @name Adapter#raw * @type {boolean} * @default false */ raw: false } /** * Abstract class meant to be extended by adapters. * * @class Adapter * @abstract * @param {Object} [opts] Configuration opts. * @param {boolean} [opts.debug=false] Whether to log debugging information. * @param {boolean} [opts.raw=false] Whether to return a more detailed response * object. */ export function Adapter (opts) { const self = this opts || (opts = {}) utils.fillIn(opts, DEFAULTS) utils.fillIn(self, opts) } export const reserved = [ 'orderBy', 'sort', 'limit', 'offset', 'skip', 'where' ] /** * Response object used when `raw` is `true`. May contain other fields in * addition to `data`. * * @class Response */ export function Response (data, meta, op) { const self = this meta || (meta = {}) /** * Response data. * * @name Response#data * @type {*} */ self.data = data utils.fillIn(self, meta) /** * The operation for which the response was created. * * @name Response#op * @type {string} */ self.op = op } /** * Alternative to ES6 class syntax for extending `Adapter`. * * @name Adapter.extend * @method * @param {Object} [instanceProps] Properties that will be added to the * prototype of the subclass. * @param {Object} [classProps] Properties that will be added as static * properties to the subclass itself. * @return {Object} Subclass of `Adapter`. */ Adapter.extend = utils.extend utils.addHiddenPropsToTarget(Adapter.prototype, { /** * Lifecycle method method called by &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the count. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * * @name Adapter#afterCount * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @property {string} opts.op `afterCount` * @param {Object|Response} response Count or {@link Response}, depending on the value of `opts.raw`. */ afterCount: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the created record. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * * @name Adapter#afterCreate * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @property {string} opts.op `afterCreate` * @param {Object|Response} response Created record or {@link Response}, depending on the value of `opts.raw`. */ afterCreate: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the created records. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * * @name Adapter#afterCreate * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @param {Object[]} props The `props` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @property {string} opts.op `afterCreateMany` * @param {Object[]|Response} response Created records or {@link Response}, depending on the value of `opts.raw`. */ afterCreateMany: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be `undefined`. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * * @name Adapter#afterDestroy * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @property {string} opts.op `afterDestroy` * @param {undefined|Response} response `undefined` or {@link Response}, depending on the value of `opts.raw`. */ afterDestroy: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be `undefined`. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * * @name Adapter#afterDestroyAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @property {string} opts.op `afterDestroyAll` * @param {undefined|Response} response `undefined` or {@link Response}, depending on the value of `opts.raw`. */ afterDestroyAll: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the found record, if any. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * * @name Adapter#afterFind * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @property {string} opts.op `afterFind` * @param {Object|Response} response The found record or {@link Response}, depending on the value of `opts.raw`. */ afterFind: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the found records, if any. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * * @name Adapter#afterFindAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @property {string} opts.op `afterFindAll` * @param {Object[]|Response} response The found records or {@link Response}, depending on the value of `opts.raw`. */ afterFindAll: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the sum. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * * @name Adapter#afterSum * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @param {string} field The `field` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @property {string} opts.op `afterSum` * @param {Object|Response} response Count or {@link Response}, depending on the value of `opts.raw`. */ afterSum: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated record. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * * @name Adapter#afterUpdate * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @property {string} opts.op `afterUpdate` * @param {Object|Response} response The updated record or {@link Response}, depending on the value of `opts.raw`. */ afterUpdate: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated records, if any. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * * @name Adapter#afterUpdateAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @property {string} opts.op `afterUpdateAll` * @param {Object[]|Response} response The updated records or {@link Response}, depending on the value of `opts.raw`. */ afterUpdateAll: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt; to wait for the Promise to resolve before continuing. * * If `opts.raw` is `true` then `response` will be a detailed response object, otherwise `response` will be the updated records, if any. * * `response` may be modified. You can also re-assign `response` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * * @name Adapter#afterUpdateMany * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @param {Object[]} records The `records` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @property {string} opts.op `afterUpdateMany` * @param {Object[]|Response} response The updated records or {@link Response}, depending on the value of `opts.raw`. */ afterUpdateMany: noop2, /** * Lifecycle method method called by &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * * @name Adapter#beforeCount * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#count__anchor&quot;&gt;count&lt;/a&gt;. * @property {string} opts.op `beforeCount` */ beforeCount: noop, /** * Lifecycle method method called by &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt; to wait for the Promise to resolve before continuing. * * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * * @name Adapter#beforeCreate * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#create__anchor&quot;&gt;create&lt;/a&gt;. * @property {string} opts.op `beforeCreate` */ beforeCreate: noop, /** * Lifecycle method method called by &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt; to wait for the Promise to resolve before continuing. * * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * * @name Adapter#beforeCreateMany * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @param {Object[]} props The `props` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#createMany__anchor&quot;&gt;createMany&lt;/a&gt;. * @property {string} opts.op `beforeCreateMany` */ beforeCreateMany: noop, /** * Lifecycle method method called by &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * * @name Adapter#beforeDestroy * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#destroy__anchor&quot;&gt;destroy&lt;/a&gt;. * @property {string} opts.op `beforeDestroy` */ beforeDestroy: noop, /** * Lifecycle method method called by &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * * @name Adapter#beforeDestroyAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#destroyAll__anchor&quot;&gt;destroyAll&lt;/a&gt;. * @property {string} opts.op `beforeDestroyAll` */ beforeDestroyAll: noop, /** * Lifecycle method method called by &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * * @name Adapter#beforeFind * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#find__anchor&quot;&gt;find&lt;/a&gt;. * @property {string} opts.op `beforeFind` */ beforeFind: noop, /** * Lifecycle method method called by &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * * @name Adapter#beforeFindAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#findAll__anchor&quot;&gt;findAll&lt;/a&gt;. * @property {string} opts.op `beforeFindAll` */ beforeFindAll: noop, /** * Lifecycle method method called by &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt; to wait for the Promise to resolve before continuing. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * * @name Adapter#beforeSum * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#sum__anchor&quot;&gt;sum&lt;/a&gt;. * @property {string} opts.op `beforeSum` */ beforeSum: noop, /** * Lifecycle method method called by &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt; to wait for the Promise to resolve before continuing. * * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * * @name Adapter#beforeUpdate * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {(string|number)} id The `id` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#update__anchor&quot;&gt;update&lt;/a&gt;. * @property {string} opts.op `beforeUpdate` */ beforeUpdate: noop, /** * Lifecycle method method called by &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt; to wait for the Promise to resolve before continuing. * * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * * @name Adapter#beforeUpdateAll * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} props The `props` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} query The `query` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#updateAll__anchor&quot;&gt;updateAll&lt;/a&gt;. * @property {string} opts.op `beforeUpdateAll` */ beforeUpdateAll: noop, /** * Lifecycle method method called by &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * * Override this method to add custom behavior for this lifecycle hook. * * Returning a Promise causes &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt; to wait for the Promise to resolve before continuing. * * `props` may be modified. You can also re-assign `props` to another value by returning a different value or a Promise that resolves to a different value. * * A thrown error or rejected Promise will bubble up and reject the Promise returned by &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * * @name Adapter#beforeUpdateMany * @method * @param {Object} mapper The `mapper` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @param {Object[]} props The `props` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @param {Object} opts The `opts` argument passed to &lt;a href=&quot;#updateMany__anchor&quot;&gt;updateMany&lt;/a&gt;. * @property {string} opts.op `beforeUpdateMany` */ beforeUpdateMany: noop, /** * Shortcut for `#log('debug'[, arg1[, arg2[, argn]]])`. * * @name Adapter#dbg * @method */ dbg (...args) { this.log('debug', ...args) }, /** * Retrieve the number of records that match the selection query. Called by * `Mapper#count`. * * @name Adapter#count * @method * @param {Object} mapper The mapper. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ count (mapper, query, opts) { const self = this let op query || (query = {}) opts || (opts = {}) // beforeCount lifecycle hook op = opts.op = 'beforeCount' return utils.resolve(self[op](mapper, query, opts)).then(function () { // Allow for re-assignment from lifecycle hook op = opts.op = 'count' self.dbg(op, mapper, query, opts) return utils.resolve(self._count(mapper, query, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, op) response = self.respond(response, opts) // afterCount lifecycle hook op = opts.op = 'afterCount' return utils.resolve(self[op](mapper, query, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Create a new record. Called by `Mapper#create`. * * @name Adapter#create * @method * @param {Object} mapper The mapper. * @param {Object} props The record to be created. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ create (mapper, props, opts) { const self = this let op props || (props = {}) opts || (opts = {}) // beforeCreate lifecycle hook op = opts.op = 'beforeCreate' return utils.resolve(self[op](mapper, props, opts)).then(function (_props) { // Allow for re-assignment from lifecycle hook props = utils.isUndefined(_props) ? props : _props props = withoutRelations(mapper, props, opts) op = opts.op = 'create' self.dbg(op, mapper, props, opts) return utils.resolve(self._create(mapper, props, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, 'create') response.created = data ? 1 : 0 response = self.respond(response, opts) // afterCreate lifecycle hook op = opts.op = 'afterCreate' return utils.resolve(self[op](mapper, props, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Create multiple records in a single batch. Called by `Mapper#createMany`. * * @name Adapter#createMany * @method * @param {Object} mapper The mapper. * @param {Object} props The records to be created. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ createMany (mapper, props, opts) { const self = this let op props || (props = {}) opts || (opts = {}) // beforeCreateMany lifecycle hook op = opts.op = 'beforeCreateMany' return utils.resolve(self[op](mapper, props, opts)).then(function (_props) { // Allow for re-assignment from lifecycle hook props = utils.isUndefined(_props) ? props : _props props = props.map(function (record) { return withoutRelations(mapper, record, opts) }) op = opts.op = 'createMany' self.dbg(op, mapper, props, opts) return utils.resolve(self._createMany(mapper, props, opts)) }).then(function (results) { let [data, result] = results data || (data = []) result || (result = {}) let response = new Response(data, result, 'createMany') response.created = data.length response = self.respond(response, opts) // afterCreateMany lifecycle hook op = opts.op = 'afterCreateMany' return utils.resolve(self[op](mapper, props, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Destroy the record with the given primary key. Called by * `Mapper#destroy`. * * @name Adapter#destroy * @method * @param {Object} mapper The mapper. * @param {(string|number)} id Primary key of the record to destroy. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ destroy (mapper, id, opts) { const self = this let op opts || (opts = {}) // beforeDestroy lifecycle hook op = opts.op = 'beforeDestroy' return utils.resolve(self[op](mapper, id, opts)).then(function () { op = opts.op = 'destroy' self.dbg(op, mapper, id, opts) return utils.resolve(self._destroy(mapper, id, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, 'destroy') response = self.respond(response, opts) // afterDestroy lifecycle hook op = opts.op = 'afterDestroy' return utils.resolve(self[op](mapper, id, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Destroy the records that match the selection query. Called by * `Mapper#destroyAll`. * * @name Adapter#destroyAll * @method * @param {Object} mapper the mapper. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ destroyAll (mapper, query, opts) { const self = this let op query || (query = {}) opts || (opts = {}) // beforeDestroyAll lifecycle hook op = opts.op = 'beforeDestroyAll' return utils.resolve(self[op](mapper, query, opts)).then(function () { op = opts.op = 'destroyAll' self.dbg(op, mapper, query, opts) return utils.resolve(self._destroyAll(mapper, query, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, 'destroyAll') response = self.respond(response, opts) // afterDestroyAll lifecycle hook op = opts.op = 'afterDestroyAll' return utils.resolve(self[op](mapper, query, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Load a belongsTo relationship. * * Override with care. * * @name Adapter#loadBelongsTo * @method * @return {Promise} */ loadBelongsTo (mapper, def, records, __opts) { const self = this const relationDef = def.getRelation() if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { const record = records return self.find(relationDef, self.makeBelongsToForeignKey(mapper, def, record), __opts).then(function (relatedItem) { def.setLocalField(record, relatedItem) }) } else { const keys = records.map(function (record) { return self.makeBelongsToForeignKey(mapper, def, record) }).filter(function (key) { return key }) return self.findAll(relationDef, { where: { [relationDef.idAttribute]: { 'in': keys } } }, __opts).then(function (relatedItems) { records.forEach(function (record) { relatedItems.forEach(function (relatedItem) { if (relatedItem[relationDef.idAttribute] === record[def.foreignKey]) { def.setLocalField(record, relatedItem) } }) }) }) } }, /** * Retrieve the record with the given primary key. Called by `Mapper#find`. * * @name Adapter#find * @method * @param {Object} mapper The mapper. * @param {(string|number)} id Primary key of the record to retrieve. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @param {string[]} [opts.with=[]] Relations to eager load. * @return {Promise} */ find (mapper, id, opts) { const self = this let record, op opts || (opts = {}) opts.with || (opts.with = []) // beforeFind lifecycle hook op = opts.op = 'beforeFind' return utils.resolve(self[op](mapper, id, opts)).then(function () { op = opts.op = 'find' self.dbg(op, mapper, id, opts) return utils.resolve(self._find(mapper, id, opts)) }).then(function (results) { let [_record] = results if (!_record) { return } record = _record const tasks = [] utils.forEachRelation(mapper, opts, function (def, __opts) { let task if (def.foreignKey &amp;&amp; (def.type === 'hasOne' || def.type === 'hasMany')) { if (def.type === 'hasOne') { task = self.loadHasOne(mapper, def, record, __opts) } else { task = self.loadHasMany(mapper, def, record, __opts) } } else if (def.type === 'hasMany' &amp;&amp; def.localKeys) { task = self.loadHasManyLocalKeys(mapper, def, record, __opts) } else if (def.type === 'hasMany' &amp;&amp; def.foreignKeys) { task = self.loadHasManyForeignKeys(mapper, def, record, __opts) } else if (def.type === 'belongsTo') { task = self.loadBelongsTo(mapper, def, record, __opts) } if (task) { tasks.push(task) } }) return Promise.all(tasks) }).then(function () { let response = new Response(record, {}, 'find') response.found = record ? 1 : 0 response = self.respond(response, opts) // afterFind lifecycle hook op = opts.op = 'afterFind' return utils.resolve(self[op](mapper, id, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Retrieve the records that match the selection query. * * @name Adapter#findAll * @method * @param {Object} mapper The mapper. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @param {string[]} [opts.with=[]] Relations to eager load. * @return {Promise} */ findAll (mapper, query, opts) { const self = this opts || (opts = {}) opts.with || (opts.with = []) let records = [] let op const activeWith = opts._activeWith if (utils.isObject(activeWith)) { const activeQuery = activeWith.query || {} if (activeWith.replace) { query = activeQuery } else { utils.deepFillIn(query, activeQuery) } } // beforeFindAll lifecycle hook op = opts.op = 'beforeFindAll' return utils.resolve(self[op](mapper, query, opts)).then(function () { op = opts.op = 'findAll' self.dbg(op, mapper, query, opts) return utils.resolve(self._findAll(mapper, query, opts)) }).then(function (results) { let [_records] = results _records || (_records = []) records = _records const tasks = [] utils.forEachRelation(mapper, opts, function (def, __opts) { let task if (def.foreignKey &amp;&amp; (def.type === 'hasOne' || def.type === 'hasMany')) { if (def.type === 'hasMany') { task = self.loadHasMany(mapper, def, records, __opts) } else { task = self.loadHasOne(mapper, def, records, __opts) } } else if (def.type === 'hasMany' &amp;&amp; def.localKeys) { task = self.loadHasManyLocalKeys(mapper, def, records, __opts) } else if (def.type === 'hasMany' &amp;&amp; def.foreignKeys) { task = self.loadHasManyForeignKeys(mapper, def, records, __opts) } else if (def.type === 'belongsTo') { task = self.loadBelongsTo(mapper, def, records, __opts) } if (task) { tasks.push(task) } }) return Promise.all(tasks) }).then(function () { let response = new Response(records, {}, 'findAll') response.found = records.length response = self.respond(response, opts) // afterFindAll lifecycle hook op = opts.op = 'afterFindAll' return utils.resolve(self[op](mapper, query, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Resolve the value of the specified option based on the given options and * this adapter's settings. Override with care. * * @name Adapter#getOpt * @method * @param {string} opt The name of the option. * @param {Object} [opts] Configuration options. * @return {*} The value of the specified option. */ getOpt (opt, opts) { opts || (opts = {}) return utils.isUndefined(opts[opt]) ? utils.plainCopy(this[opt]) : utils.plainCopy(opts[opt]) }, /** * Load a hasMany relationship. * * Override with care. * * @name Adapter#loadHasMany * @method * @return {Promise} */ loadHasMany (mapper, def, records, __opts) { const self = this let singular = false if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { singular = true records = [records] } const IDs = records.map(function (record) { return self.makeHasManyForeignKey(mapper, def, record) }) const query = { where: {} } const criteria = query.where[def.foreignKey] = {} if (singular) { // more efficient query when we only have one record criteria['=='] = IDs[0] } else { criteria['in'] = IDs.filter(function (id) { return id }) } return self.findAll(def.getRelation(), query, __opts).then(function (relatedItems) { records.forEach(function (record) { let attached = [] // avoid unneccesary iteration when we only have one record if (singular) { attached = relatedItems } else { relatedItems.forEach(function (relatedItem) { if (utils.get(relatedItem, def.foreignKey) === record[mapper.idAttribute]) { attached.push(relatedItem) } }) } def.setLocalField(record, attached) }) }) }, loadHasManyLocalKeys (mapper, def, records, __opts) { const self = this let record const relatedMapper = def.getRelation() if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { record = records } if (record) { return self.findAll(relatedMapper, { where: { [relatedMapper.idAttribute]: { 'in': self.makeHasManyLocalKeys(mapper, def, record) } } }, __opts).then(function (relatedItems) { def.setLocalField(record, relatedItems) }) } else { let localKeys = [] records.forEach(function (record) { localKeys = localKeys.concat(self.self.makeHasManyLocalKeys(mapper, def, record)) }) return self.findAll(relatedMapper, { where: { [relatedMapper.idAttribute]: { 'in': unique(localKeys).filter(function (x) { return x }) } } }, __opts).then(function (relatedItems) { records.forEach(function (item) { let attached = [] let itemKeys = utils.get(item, def.localKeys) || [] itemKeys = utils.isArray(itemKeys) ? itemKeys : Object.keys(itemKeys) relatedItems.forEach(function (relatedItem) { if (itemKeys &amp;&amp; itemKeys.indexOf(relatedItem[relatedMapper.idAttribute]) !== -1) { attached.push(relatedItem) } }) def.setLocalField(item, attached) }) return relatedItems }) } }, loadHasManyForeignKeys (mapper, def, records, __opts) { const self = this const relatedMapper = def.getRelation() const idAttribute = mapper.idAttribute let record if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { record = records } if (record) { return self.findAll(def.getRelation(), { where: { [def.foreignKeys]: { 'contains': self.makeHasManyForeignKeys(mapper, def, record) } } }, __opts).then(function (relatedItems) { def.setLocalField(record, relatedItems) }) } else { return self.findAll(relatedMapper, { where: { [def.foreignKeys]: { 'isectNotEmpty': records.map(function (record) { return self.makeHasManyForeignKeys(mapper, def, record) }) } } }, __opts).then(function (relatedItems) { const foreignKeysField = def.foreignKeys records.forEach(function (record) { const _relatedItems = [] const id = utils.get(record, idAttribute) relatedItems.forEach(function (relatedItem) { const foreignKeys = utils.get(relatedItems, foreignKeysField) || [] if (foreignKeys.indexOf(id) !== -1) { _relatedItems.push(relatedItem) } }) def.setLocalField(record, _relatedItems) }) }) } }, /** * Load a hasOne relationship. * * Override with care. * * @name Adapter#loadHasOne * @method * @return {Promise} */ loadHasOne (mapper, def, records, __opts) { if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { records = [records] } return this.loadHasMany(mapper, def, records, __opts).then(function () { records.forEach(function (record) { const relatedData = def.getLocalField(record) if (utils.isArray(relatedData) &amp;&amp; relatedData.length) { def.setLocalField(record, relatedData[0]) } }) }) }, /** * Logging utility method. Override this method if you want to send log * messages to something other than the console. * * @name Adapter#log * @method * @param {string} level Log level. * @param {...*} values Values to log. */ log (level, ...args) { if (level &amp;&amp; !args.length) { args.push(level) level = 'debug' } if (level === 'debug' &amp;&amp; !this.debug) { return } const prefix = `${level.toUpperCase()}: (Adapter)` if (console[level]) { console[level](prefix, ...args) } else { console.log(prefix, ...args) } }, /** * Return the foreignKey from the given record for the provided relationship. * * There may be reasons why you may want to override this method, like when * the id of the parent doesn't exactly match up to the key on the child. * * Override with care. * * @name Adapter#makeHasManyForeignKey * @method * @return {*} */ makeHasManyForeignKey (mapper, def, record) { return def.getForeignKey(record) }, /** * Return the localKeys from the given record for the provided relationship. * * Override with care. * * @name Adapter#makeHasManyLocalKeys * @method * @return {*} */ makeHasManyLocalKeys (mapper, def, record) { let localKeys = [] let itemKeys = utils.get(record, def.localKeys) || [] itemKeys = utils.isArray(itemKeys) ? itemKeys : Object.keys(itemKeys) localKeys = localKeys.concat(itemKeys) return unique(localKeys).filter(function (x) { return x }) }, /** * Return the foreignKeys from the given record for the provided relationship. * * Override with care. * * @name Adapter#makeHasManyForeignKeys * @method * @return {*} */ makeHasManyForeignKeys (mapper, def, record) { return utils.get(record, mapper.idAttribute) }, /** * Return the foreignKey from the given record for the provided relationship. * * Override with care. * * @name Adapter#makeBelongsToForeignKey * @method * @return {*} */ makeBelongsToForeignKey (mapper, def, record) { return def.getForeignKey(record) }, /** * Retrieve sum of the specified field of the records that match the selection * query. Called by `Mapper#sum`. * * @name Adapter#sum * @method * @param {Object} mapper The mapper. * @param {string} field By to sum. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ sum (mapper, field, query, opts) { const self = this let op if (!utils.isString(field)) { throw new Error('field must be a string!') } query || (query = {}) opts || (opts = {}) // beforeSum lifecycle hook op = opts.op = 'beforeSum' return utils.resolve(self[op](mapper, field, query, opts)).then(function () { // Allow for re-assignment from lifecycle hook op = opts.op = 'sum' self.dbg(op, mapper, field, query, opts) return utils.resolve(self._sum(mapper, field, query, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, op) response = self.respond(response, opts) // afterSum lifecycle hook op = opts.op = 'afterSum' return utils.resolve(self[op](mapper, field, query, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * @name Adapter#respond * @method * @param {Object} response Response object. * @param {Object} opts Configuration options. * return {Object} If `opts.raw == true` then return `response`, else return * `response.data`. */ respond (response, opts) { return this.getOpt('raw', opts) ? response : response.data }, /** * Apply the given update to the record with the specified primary key. Called * by `Mapper#update`. * * @name Adapter#update * @method * @param {Object} mapper The mapper. * @param {(string|number)} id The primary key of the record to be updated. * @param {Object} props The update to apply to the record. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ update (mapper, id, props, opts) { const self = this props || (props = {}) opts || (opts = {}) let op // beforeUpdate lifecycle hook op = opts.op = 'beforeUpdate' return utils.resolve(self[op](mapper, id, props, opts)).then(function (_props) { // Allow for re-assignment from lifecycle hook props = utils.isUndefined(_props) ? props : _props props = withoutRelations(mapper, props, opts) op = opts.op = 'update' self.dbg(op, mapper, id, props, opts) return utils.resolve(self._update(mapper, id, props, opts)) }).then(function (results) { let [data, result] = results result || (result = {}) let response = new Response(data, result, 'update') response.updated = data ? 1 : 0 response = self.respond(response, opts) // afterUpdate lifecycle hook op = opts.op = 'afterUpdate' return utils.resolve(self[op](mapper, id, props, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Apply the given update to all records that match the selection query. * Called by `Mapper#updateAll`. * * @name Adapter#updateAll * @method * @param {Object} mapper The mapper. * @param {Object} props The update to apply to the selected records. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ updateAll (mapper, props, query, opts) { const self = this props || (props = {}) query || (query = {}) opts || (opts = {}) let op // beforeUpdateAll lifecycle hook op = opts.op = 'beforeUpdateAll' return utils.resolve(self[op](mapper, props, query, opts)).then(function (_props) { // Allow for re-assignment from lifecycle hook props = utils.isUndefined(_props) ? props : _props props = withoutRelations(mapper, props, opts) op = opts.op = 'updateAll' self.dbg(op, mapper, props, query, opts) return utils.resolve(self._updateAll(mapper, props, query, opts)) }).then(function (results) { let [data, result] = results data || (data = []) result || (result = {}) let response = new Response(data, result, 'updateAll') response.updated = data.length response = self.respond(response, opts) // afterUpdateAll lifecycle hook op = opts.op = 'afterUpdateAll' return utils.resolve(self[op](mapper, props, query, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) }, /** * Update the given records in a single batch. Called by `Mapper#updateMany`. * * @name Adapter#updateMany * @method * @param {Object} mapper The mapper. * @param {Object[]} records The records to update. * @param {Object} [opts] Configuration options. * @param {boolean} [opts.raw=false] Whether to return a more detailed * response object. * @return {Promise} */ updateMany (mapper, records, opts) { const self = this records || (records = []) opts || (opts = {}) let op const idAttribute = mapper.idAttribute records = records.filter(function (record) { return utils.get(record, idAttribute) }) // beforeUpdateMany lifecycle hook op = opts.op = 'beforeUpdateMany' return utils.resolve(self[op](mapper, records, opts)).then(function (_records) { // Allow for re-assignment from lifecycle hook records = utils.isUndefined(_records) ? records : _records records = records.map(function (record) { return withoutRelations(mapper, record, opts) }) op = opts.op = 'updateMany' self.dbg(op, mapper, records, opts) return utils.resolve(self._updateMany(mapper, records, opts)) }).then(function (results) { let [data, result] = results data || (data = []) result || (result = {}) let response = new Response(data, result, 'updateMany') response.updated = data.length response = self.respond(response, opts) // afterUpdateMany lifecycle hook op = opts.op = 'afterUpdateMany' return utils.resolve(self[op](mapper, records, opts, response)).then(function (_response) { // Allow for re-assignment from lifecycle hook return utils.isUndefined(_response) ? response : _response }) }) } })  Search results Close js-data.io "},"src_index.js.html":{"id":"src_index.js.html","title":"Source: src/index.js","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Source: src/index.js // Copyright 2016, Google, Inc. // // Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); // you may not use this file except in compliance with the License. // You may obtain a copy of the License at // // http://www.apache.org/licenses/LICENSE-2.0 // // Unless required by applicable law or agreed to in writing, software // distributed under the License is distributed on an &quot;AS IS&quot; BASIS, // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. // See the License for the specific language governing permissions and // limitations under the License. 'use strict'; import {utils} from 'js-data'; import gcloud from 'gcloud'; import { Adapter, reserved } from 'js-data-adapter'; const __super__ = Adapter.prototype; const GCLOUD_DEFAULTS = { projectId: process.env.GCLOUD_PROJECT }; const equal = function (query, field, value) { return query.filter(field, '=', value); }; /** * Default predicate functions for the filtering operators. * * @name module:js-data-cloud-datastore.OPERATORS * @property {Function} == Equality operator. * @property {Function} &gt; &quot;Greater than&quot; operator. * @property {Function} &gt;= &quot;Greater than or equal to&quot; operator. * @property {Function} &lt; &quot;Less than&quot; operator. * @property {Function} &lt;= &quot;Less than or equal to&quot; operator. */ export const OPERATORS = { '==': equal, '===': equal, '&gt;': function (query, field, value) { return query.filter(field, '&gt;', value); }, '&gt;=': function (query, field, value) { return query.filter(field, '&gt;=', value); }, '&lt;': function (query, field, value) { return query.filter(field, '&lt;', value); }, '&lt;=': function (query, field, value) { return query.filter(field, '&lt;=', value); } }; /** * CloudDatastoreAdapter class. * * @example * // Use Container instead of DataStore on the server * import {Container} from 'js-data' * import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' * * // Create a store to hold your Mappers * const store = new Container() * * // Create an instance of CloudDatastoreAdapter with default settings * const adapter = new CloudDatastoreAdapter() * * // Mappers in &quot;store&quot; will use the CloudDatastore adapter by default * store.registerAdapter('datastore', adapter, { default: true }) * * // Create a Mapper that maps to a &quot;user&quot; table * store.defineMapper('user') * * @class CloudDatastoreAdapter * @extends Adapter * @param {Object} [opts] Configuration options. * @param {boolean} [opts.debug=false] See {@link Adapter#debug}. * @param {Function} [opts.gcloud] See {@link CloudDatastoreAdapter#gcloud}. * @param {Object} [opts.gcloudOpts] See {@link CloudDatastoreAdapter#gcloudOpts}. * Ignored if you provide a pre-configured gcloud instance. * @param {boolean} [opts.raw=false] See {@link Adapter#raw}. */ export function CloudDatastoreAdapter (opts) { utils.classCallCheck(this, CloudDatastoreAdapter); opts || (opts = {}); // Setup non-enumerable properties Object.defineProperties(this, { /** * Instance of gcloud.datastore used by this adapter. Use this directly when * you need to write custom queries. * * @name CloudDatastoreAdapter#datastore * @type {Object} */ datastore: { writable: true, value: undefined }, /** * The gcloud instance used by this adapter. Use this directly when you need * to write custom queries. * * @name CloudDatastoreAdapter#gcloud * @type {Object} */ gcloud: { writable: true, value: undefined } }); Adapter.call(this, opts); /** * Options to be passed to a new gcloud instance, if one wasn't provided. * * @name CloudDatastoreAdapter#gcloudOpts * @type {Object} * @default {} * @property {string} projectId Google Cloud Platform project id. */ this.gcloudOpts || (this.gcloudOpts = {}); utils.fillIn(this.gcloudOpts, GCLOUD_DEFAULTS); /** * Override the default predicate functions for the specified operators. * * @name CloudDatastoreAdapter#operators * @type {Object} * @default {} */ this.operators || (this.operators = {}); utils.fillIn(this.operators, OPERATORS); this.gcloud || (this.gcloud = gcloud(this.gcloudOpts)); this.datastore = this.gcloud.datastore(); } // Setup prototype inheritance from Adapter CloudDatastoreAdapter.prototype = Object.create(Adapter.prototype, { constructor: { value: CloudDatastoreAdapter, enumerable: false, writable: true, configurable: true } }); Object.defineProperty(CloudDatastoreAdapter, '__super__', { configurable: true, value: Adapter }); /** * Alternative to ES6 class syntax for extending `CloudDatastoreAdapter`. * * @example &lt;caption&gt;Using the ES2015 class syntax.&lt;/caption&gt; * class MyCloudDatastoreAdapter extends CloudDatastoreAdapter {...} * const adapter = new MyCloudDatastoreAdapter() * * @example &lt;caption&gt;Using {@link CloudDatastoreAdapter.extend}.&lt;/caption&gt; * var instanceProps = {...} * var classProps = {...} * * var MyCloudDatastoreAdapter = CloudDatastoreAdapter.extend(instanceProps, classProps) * var adapter = new MyCloudDatastoreAdapter() * * @method CloudDatastoreAdapter.extend * @static * @param {Object} [instanceProps] Properties that will be added to the * prototype of the subclass. * @param {Object} [classProps] Properties that will be added as static * properties to the subclass itself. * @return {Constructor} Subclass of `CloudDatastoreAdapter`. */ CloudDatastoreAdapter.extend = utils.extend; utils.addHiddenPropsToTarget(CloudDatastoreAdapter.prototype, { /** * Apply the specified selection query to the provided Datastore query. * * @method CloudDatastoreAdapter#filterQuery * @param {Object} mapper The mapper. * @param {Object} [query] Selection query. * @param {Object} [query.where] Filtering criteria. * @param {string|Array} [query.orderBy] Sorting criteria. * @param {string|Array} [query.sort] Same as `query.sort`. * @param {number} [query.limit] Limit results. * @param {number} [query.skip] Offset results. * @param {number} [query.offset] Same as `query.skip`. * @param {Object} [opts] Configuration options. * @param {Object} [opts.operators] Override the default predicate functions * for specified operators. */ filterQuery (dsQuery, query, opts) { query = utils.plainCopy(query || {}); opts || (opts = {}); opts.operators || (opts.operators = {}); query.where || (query.where = {}); query.orderBy || (query.orderBy = query.sort); query.orderBy || (query.orderBy = []); query.skip || (query.skip = query.offset); // Transform non-keyword properties to &quot;where&quot; clause configuration utils.forOwn(query, (config, keyword) =&gt; { if (reserved.indexOf(keyword) === -1) { if (utils.isObject(config)) { query.where[keyword] = config; } else { query.where[keyword] = { '==': config }; } delete query[keyword]; } }); // Apply filter if (Object.keys(query.where).length !== 0) { utils.forOwn(query.where, (criteria, field) =&gt; { if (!utils.isObject(criteria)) { query.where[field] = { '==': criteria }; } utils.forOwn(criteria, (value, operator) =&gt; { let isOr = false; let _operator = operator; if (_operator &amp;&amp; _operator[0] === '|') { _operator = _operator.substr(1); isOr = true; } const predicateFn = this.getOperator(_operator, opts); if (predicateFn) { if (isOr) { throw new Error(`Operator ${operator} not supported!`); } else { dsQuery = predicateFn(dsQuery, field, value); } } else { throw new Error(`Operator ${operator} not supported!`); } }); }); } // Apply sort if (query.orderBy) { if (utils.isString(query.orderBy)) { query.orderBy = [ [query.orderBy, 'asc'] ]; } query.orderBy.forEach((clause) =&gt; { if (utils.isString(clause)) { clause = [clause, 'asc']; } dsQuery = clause[1].toUpperCase() === 'DESC' ? dsQuery.order(clause[0], { descending: true }) : dsQuery.order(clause[0]); }); } // Apply skip/offset if (query.skip) { dsQuery = dsQuery.offset(+query.skip); } // Apply limit if (query.limit) { dsQuery = dsQuery.limit(+query.limit); } return dsQuery; }, _count (mapper, query, opts) { opts || (opts = {}); query || (query = {}); return new utils.Promise((resolve, reject) =&gt; { let dsQuery = this.datastore.createQuery(this.getKind(mapper, opts)); dsQuery = this.filterQuery(dsQuery, query, opts).select('__key__'); this.datastore.runQuery(dsQuery, (err, entities) =&gt; { if (err) { return reject(err); } return resolve([entities ? entities.length : 0, {}]); }); }); }, /** * Internal method used by CloudDatastoreAdapter#_create and * CloudDatastoreAdapter#_createMany. * * @method CloudDatastoreAdapter#_createHelper * @private * @param {Object} mapper The mapper. * @param {(Object|Object[])} records The record or records to be created. * @return {Promise} */ _createHelper (mapper, records) { const singular = !utils.isArray(records); if (singular) { records = [records]; } records = utils.plainCopy(records); return new utils.Promise((resolve, reject) =&gt; { let apiResponse; const idAttribute = mapper.idAttribute; const incompleteKey = this.datastore.key([mapper.name]); this.datastore.runInTransaction((transaction, done) =&gt; { // Allocate ids transaction.allocateIds(incompleteKey, records.length, (err, keys) =&gt; { if (err) { return reject(err); } const entities = records.map((_record, i) =&gt; { utils.set(_record, idAttribute, keys[i].path[1]); return { key: keys[i], data: _record }; }); // Save records this.datastore.save(entities, (err, _apiResponse) =&gt; { if (err) { return reject(err); } apiResponse = _apiResponse; return done(); }); }); }, (err) =&gt; { if (err) { return reject(err); } return resolve([singular ? records[0] : records, apiResponse]); }); }); }, /** * Create a new record. Internal method used by Adapter#create. * * @method CloudDatastoreAdapter#_create * @private * @param {Object} mapper The mapper. * @param {Object} props The record to be created. * @param {Object} [opts] Configuration options. * @return {Promise} */ _create (mapper, props, opts) { return this._createHelper(mapper, props, opts); }, /** * Create multiple records in a single batch. Internal method used by * Adapter#createMany. * * @method CloudDatastoreAdapter#_createMany * @private * @param {Object} mapper The mapper. * @param {Object} props The records to be created. * @param {Object} [opts] Configuration options. * @return {Promise} */ _createMany (mapper, props, opts) { return this._createHelper(mapper, props, opts); }, /** * Destroy the record with the given primary key. Internal method used by * Adapter#destroy. * * @method CloudDatastoreAdapter#_destroy * @private * @param {Object} mapper The mapper. * @param {(string|number)} id Primary key of the record to destroy. * response object. * @return {Promise} */ _destroy (mapper, id) { return new utils.Promise((resolve, reject) =&gt; { this.datastore.delete(this.datastore.key([mapper.name, id]), (err, apiResponse) =&gt; { return err ? reject(err) : resolve([undefined, apiResponse]); }); }); }, /** * Destroy the records that match the selection query. Internal method used by * Adapter#destroyAll. * * @method CloudDatastoreAdapter#_destroyAll * @private * @param {Object} mapper the mapper. * @param {Object} [query] Selection query. * @return {Promise} */ _destroyAll (mapper, query, opts) { return new utils.Promise((resolve, reject) =&gt; { let dsQuery = this.datastore.createQuery(this.getKind(mapper, opts)); dsQuery = this.filterQuery(dsQuery, query, opts); dsQuery = dsQuery.select('__key__'); this.datastore.runQuery(dsQuery, (err, entities) =&gt; { if (err) { return reject(err); } const keys = entities.map((entity) =&gt; entity.key); this.datastore.delete(keys, (err, apiResponse) =&gt; { if (err) { return reject(err); } resolve([undefined, apiResponse]); }); }); }); }, /** * Retrieve the record with the given primary key. Internal method used by * Adapter#find. * * @method CloudDatastoreAdapter#_find * @private * @param {Object} mapper The mapper. * @param {(string|number)} id Primary key of the record to retrieve. * @param {Object} [opts] Configuration options. * @return {Promise} */ _find (mapper, id, opts) { return new utils.Promise((resolve, reject) =&gt; { const key = this.datastore.key([this.getKind(mapper, opts), id]); this.datastore.get(key, (err, entity) =&gt; { return err ? reject(err) : resolve([entity ? entity.data : undefined, {}]); }); }); }, /** * Retrieve the records that match the selection query. Internal method used * by Adapter#findAll. * * @method CloudDatastoreAdapter#_findAll * @private * @param {Object} mapper The mapper. * @param {Object} [query] Selection query. * @param {Object} [opts] Configuration options. * @return {Promise} */ _findAll (mapper, query, opts) { return new utils.Promise((resolve, reject) =&gt; { let dsQuery = this.datastore.createQuery(this.getKind(mapper, opts)); dsQuery = this.filterQuery(dsQuery, query, opts); this.datastore.runQuery(dsQuery, (err, entities) =&gt; { if (err) { return reject(err); } return resolve([entities ? entities.map((entity) =&gt; entity.data) : [], {}]); }); }); }, _sum (mapper, field, query, opts) { if (!utils.isString(field)) { throw new Error('field must be a string!'); } opts || (opts = {}); query || (query = {}); const canSelect = !Object.keys(query).length; return new utils.Promise((resolve, reject) =&gt; { let dsQuery = this.datastore.createQuery(this.getKind(mapper, opts)); dsQuery = this.filterQuery(dsQuery, query, opts); if (canSelect) { dsQuery = dsQuery.select(field); } this.datastore.runQuery(dsQuery, (err, entities) =&gt; { if (err) { return reject(err); } const sum = entities.reduce((sum, entity) =&gt; sum + (entity.data[field] || 0), 0); return resolve([sum, {}]); }); }); }, /** * Internal method used by CloudDatastoreAdapter#_update and * CloudDatastoreAdapter#_updateAll and CloudDatastoreAdapter#_updateMany. * * @method CloudDatastoreAdapter#_updateHelper * @private * @param {Object} mapper The mapper. * @param {(Object|Object[])} records The record or records to be updated. * @param {(Object|Object[])} props The updates to apply to the record(s). * @param {Object} [opts] Configuration options. * @return {Promise} */ _updateHelper (mapper, records, props, opts) { const singular = !utils.isArray(records); if (singular) { records = [records]; props = [props]; } return new utils.Promise((resolve, reject) =&gt; { if (!records.length) { return resolve([singular ? undefined : [], {}]); } const idAttribute = mapper.idAttribute; const entities = []; const _records = []; records.forEach((record, i) =&gt; { if (!record) { return; } const id = utils.get(record, idAttribute); if (!utils.isUndefined(id)) { utils.deepMixIn(record, props[i]); entities.push({ method: 'update', key: this.datastore.key([this.getKind(mapper, opts), id]), data: record }); _records.push(record); } }); if (!_records.length) { return resolve([singular ? undefined : [], {}]); } this.datastore.save(entities, (err, apiResponse) =&gt; { return err ? reject(err) : resolve([singular ? _records[0] : _records, apiResponse]); }); }); }, /** * Apply the given update to the record with the specified primary key. * Internal method used by Adapter#update. * * @method CloudDatastoreAdapter#_update * @private * @param {Object} mapper The mapper. * @param {(string|number)} id The primary key of the record to be updated. * @param {Object} props The update to apply to the record. * @param {Object} [opts] Configuration options. * @return {Promise} */ _update (mapper, id, props, opts) { props || (props = {}); return this._find(mapper, id, opts).then((result) =&gt; { if (result[0]) { props = utils.plainCopy(props); return this._updateHelper(mapper, result[0], props, opts); } throw new Error('Not Found'); }); }, /** * Apply the given update to all records that match the selection query. * Internal method used by Adapter#updateAll. * * @method CloudDatastoreAdapter#_updateAll * @private * @param {Object} mapper The mapper. * @param {Object} props The update to apply to the selected records. * @param {Object} [query] Selection query. * @param {Object} [opts] Configuration options. * @return {Promise} */ _updateAll (mapper, props, query, opts) { props || (props = {}); return this._findAll(mapper, query, opts).then((result) =&gt; { let [records] = result; records = records.filter((record) =&gt; record); if (records.length) { props = utils.plainCopy(props); return this._updateHelper(mapper, records, records.map(() =&gt; props), opts); } return [[], {}]; }); }, /** * Update the given records in a single batch. Internal method used by * Adapter#updateMany. * * @method CloudDatastoreAdapter#_updateMany * @private * @param {Object} mapper The mapper. * @param {Object[]} records The records to update. * @param {Object} [opts] Configuration options. * @return {Promise} */ _updateMany (mapper, records, opts) { records || (records = []); const idAttribute = mapper.idAttribute; const tasks = records.map((record) =&gt; this._find(mapper, utils.get(record, idAttribute), opts)); return utils.Promise.all(tasks).then((results) =&gt; { let _records = results.map((result) =&gt; result[0]); _records.forEach((record, i) =&gt; { if (!record) { records[i] = undefined; } }); _records = _records.filter((record) =&gt; record); records = records.filter((record) =&gt; record); if (_records.length) { records = utils.plainCopy(records); return this._updateHelper(mapper, _records, records, opts); } return [[], {}]; }); }, loadBelongsTo (mapper, def, records, __opts) { if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { return __super__.loadBelongsTo.call(this, mapper, def, records, __opts); } throw new Error('findAll with belongsTo not supported!'); }, loadHasMany (mapper, def, records, __opts) { if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { return __super__.loadHasMany.call(this, mapper, def, records, __opts); } throw new Error('findAll with hasMany not supported!'); }, loadHasOne (mapper, def, records, __opts) { if (utils.isObject(records) &amp;&amp; !utils.isArray(records)) { return __super__.loadHasOne.call(this, mapper, def, records, __opts); } throw new Error('findAll with hasOne not supported!'); }, loadHasManyLocalKeys () { throw new Error('find/findAll with hasMany &amp; localKeys not supported!'); }, loadHasManyForeignKeys () { throw new Error('find/findAll with hasMany &amp; foreignKeys not supported!'); }, /** * Resolve the Cloud Datastore kind for the specified Mapper with the given * options. * * @method CloudDatastoreAdapter#getKind * @param {Object} mapper The mapper. * @param {Object} [opts] Configuration options. * @param {Object} [opts.kind] Datastore kind. * @return {string} The kind. */ getKind (mapper, opts) { opts || (opts = {}); return utils.isUndefined(opts.kind) ? (utils.isUndefined(mapper.kind) ? mapper.name : mapper.kind) : opts.kind; }, /** * Resolve the predicate function for the specified operator based on the * given options and this adapter's settings. * * @method CloudDatastoreAdapter#getOperator * @param {string} operator The name of the operator. * @param {Object} [opts] Configuration options. * @param {Object} [opts.operators] Override the default predicate functions * for specified operators. * @return {*} The predicate function for the specified operator. */ getOperator (operator, opts) { opts || (opts = {}); opts.operators || (opts.operators = {}); let ownOps = this.operators || {}; return utils.isUndefined(opts.operators[operator]) ? ownOps[operator] || OPERATORS[operator] : opts.operators[operator]; } }); /** * Details of the current version of the `js-data-cloud-datastore` module. * * @example &lt;caption&gt;ES2015 modules import&lt;/caption&gt; * import {version} from 'js-data-cloud-datastore' * console.log(version.full) * * @example &lt;caption&gt;CommonJS import&lt;/caption&gt; * var version = require('js-data-cloud-datastore').version * console.log(version.full) * * @name module:js-data-cloud-datastore.version * @type {Object} * @property {string} version.full The full semver value. * @property {number} version.major The major version number. * @property {number} version.minor The minor version number. * @property {number} version.patch The patch version number. * @property {(string|boolean)} version.alpha The alpha version value, * otherwise `false` if the current version is not alpha. * @property {(string|boolean)} version.beta The beta version value, * otherwise `false` if the current version is not beta. */ export const version = '&lt;%= version %&gt;'; /** * {@link CloudDatastoreAdapter} class. * * @example &lt;caption&gt;ES2015 modules import&lt;/caption&gt; * import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' * const adapter = new CloudDatastoreAdapter() * * @example &lt;caption&gt;CommonJS import&lt;/caption&gt; * var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter * var adapter = new CloudDatastoreAdapter() * * @name module:js-data-cloud-datastore.CloudDatastoreAdapter * @see CloudDatastoreAdapter * @type {Constructor} */ /** * Registered as `js-data-cloud-datastore` in NPM. * * @example &lt;caption&gt;Install from NPM&lt;/caption&gt; * npm i --save js-data-cloud-datastore@beta js-data@beta gcloud * * @example &lt;caption&gt;ES2015 modules import&lt;/caption&gt; * import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' * const adapter = new CloudDatastoreAdapter() * * @example &lt;caption&gt;CommonJS import&lt;/caption&gt; * var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter * var adapter = new CloudDatastoreAdapter() * * @module js-data-cloud-datastore */  Search results Close js-data.io "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Modules Details Classes Adapter CloudDatastoreAdapter Response  Search results Close js-data.io "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Classes Details Classes Adapter CloudDatastoreAdapter Response  Search results Close js-data.io "},"index.html":{"id":"index.html","title":"Index","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse js-data-cloud-datastore 1.0.0-beta.2 js-data-cloud-datastore Google Cloud Datastore adapter for js-data. Note: This adapter is in beta, and uses the 3.0 beta version of js-data. To get started, visit http://js-data.io. Links Quick start - Get started in 5 minutes Guides and Tutorials - Learn how to use JSData CloudDatastoreAdapter Guide - Learn how to use CloudDatastoreAdapter API Reference Docs - Explore components, methods, options, etc. Community &amp; Support - Find solutions and chat with the community General Contributing Guide - Give back and move the project forward Contributing to js-data-cloud-datastore LicenseApache Version 2.0 Copyright (c) 2016 js-data-cloud-datastore project authors LICENSE AUTHORS CONTRIBUTORS  Search results Close js-data.io "},"Adapter.html":{"id":"Adapter.html","title":"Class: Adapter","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Class: Adapter Adapter &lt;abstract&gt; new Adapter(opts) Abstract class meant to be extended by adapters. Method parameters: Name Type Argument Description opts Object &lt;optional&gt; Configuration opts. Properties Name Type Argument Default Description debug Boolean &lt;optional&gt; false Whether to log debugging information. raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Details Source node_modules/js-data-adapter/src/index.js, line 61 Members debug Whether to log debugging information. Details Type Default value Source Boolean false node_modules/js-data-adapter/src/index.js, line 42 raw Whether to return a more detailed response object. Details Type Default value Source Boolean false node_modules/js-data-adapter/src/index.js, line 51 Methods &lt;static&gt; extend(instanceProps, classProps) Alternative to ES6 class syntax for extending Adapter. Method parameters: Name Type Argument Description instanceProps Object &lt;optional&gt; Properties that will be added to the prototype of the subclass. classProps Object &lt;optional&gt; Properties that will be added as static properties to the subclass itself. Return value: Type Description Object Subclass of Adapter. Details Source node_modules/js-data-adapter/src/index.js, line 116 afterCount(mapper, props, opts, response) Lifecycle method method called by count. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes count to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the count. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by count. Method parameters: Name Type Description mapper Object The mapper argument passed to count. props Object The props argument passed to count. opts Object The opts argument passed to count. response Object | Response Count or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 130 Properties: Name Type Description opts.op String afterCount afterCreate(mapper, props, opts, response) Lifecycle method method called by create. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes create to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the created record. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by create. Method parameters: Name Type Description mapper Object The mapper argument passed to create. props Object The props argument passed to create. opts Object The opts argument passed to create. response Object | Response Created record or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 153 Properties: Name Type Description opts.op String afterCreate afterCreate(mapper, props, opts, response) Lifecycle method method called by createMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes createMany to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the created records. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by createMany. Method parameters: Name Type Description mapper Object The mapper argument passed to createMany. props Array.&lt;Object&gt; The props argument passed to createMany. opts Object The opts argument passed to createMany. response Array.&lt;Object&gt; | Response Created records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 176 Properties: Name Type Description opts.op String afterCreateMany afterDestroy(mapper, id, opts, response) Lifecycle method method called by destroy. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroy to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be undefined. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroy. Method parameters: Name Type Description mapper Object The mapper argument passed to destroy. id String | Number The id argument passed to destroy. opts Object The opts argument passed to destroy. response undefined | Response undefined or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 199 Properties: Name Type Description opts.op String afterDestroy afterDestroyAll(mapper, query, opts, response) Lifecycle method method called by destroyAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroyAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be undefined. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroyAll. Method parameters: Name Type Description mapper Object The mapper argument passed to destroyAll. query Object The query argument passed to destroyAll. opts Object The opts argument passed to destroyAll. response undefined | Response undefined or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 222 Properties: Name Type Description opts.op String afterDestroyAll afterFind(mapper, id, opts, response) Lifecycle method method called by find. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes find to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the found record, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by find. Method parameters: Name Type Description mapper Object The mapper argument passed to find. id String | Number The id argument passed to find. opts Object The opts argument passed to find. response Object | Response The found record or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 245 Properties: Name Type Description opts.op String afterFind afterFindAll(mapper, query, opts, response) Lifecycle method method called by findAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes findAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the found records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by findAll. Method parameters: Name Type Description mapper Object The mapper argument passed to findAll. query Object The query argument passed to findAll. opts Object The opts argument passed to findAll. response Array.&lt;Object&gt; | Response The found records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 268 Properties: Name Type Description opts.op String afterFindAll afterSum(mapper, field, query, opts, response) Lifecycle method method called by sum. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes sum to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the sum. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by sum. Method parameters: Name Type Description mapper Object The mapper argument passed to sum. field String The field argument passed to sum. query Object The query argument passed to sum. opts Object The opts argument passed to sum. response Object | Response Count or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 291 Properties: Name Type Description opts.op String afterSum afterUpdate(mapper, id, props, opts, response) Lifecycle method method called by update. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes update to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated record. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by update. Method parameters: Name Type Description mapper Object The mapper argument passed to update. id String | Number The id argument passed to update. props Object The props argument passed to update. opts Object The opts argument passed to update. response Object | Response The updated record or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 315 Properties: Name Type Description opts.op String afterUpdate afterUpdateAll(mapper, props, query, opts, response) Lifecycle method method called by updateAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateAll. Method parameters: Name Type Description mapper Object The mapper argument passed to updateAll. props Object The props argument passed to updateAll. query Object The query argument passed to updateAll. opts Object The opts argument passed to updateAll. response Array.&lt;Object&gt; | Response The updated records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 339 Properties: Name Type Description opts.op String afterUpdateAll afterUpdateMany(mapper, records, opts, response) Lifecycle method method called by updateMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateMany to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateMany. Method parameters: Name Type Description mapper Object The mapper argument passed to updateMany. records Array.&lt;Object&gt; The records argument passed to updateMany. opts Object The opts argument passed to updateMany. response Array.&lt;Object&gt; | Response The updated records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 363 Properties: Name Type Description opts.op String afterUpdateMany beforeCount(mapper, query, opts) Lifecycle method method called by count. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes count to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by count. Method parameters: Name Type Description mapper Object The mapper argument passed to count. query Object The query argument passed to count. opts Object The opts argument passed to count. Details Source node_modules/js-data-adapter/src/index.js, line 386 Properties: Name Type Description opts.op String beforeCount beforeCreate(mapper, props, opts) Lifecycle method method called by create. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes create to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by create. Method parameters: Name Type Description mapper Object The mapper argument passed to create. props Object The props argument passed to create. opts Object The opts argument passed to create. Details Source node_modules/js-data-adapter/src/index.js, line 404 Properties: Name Type Description opts.op String beforeCreate beforeCreateMany(mapper, props, opts) Lifecycle method method called by createMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes createMany to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by createMany. Method parameters: Name Type Description mapper Object The mapper argument passed to createMany. props Array.&lt;Object&gt; The props argument passed to createMany. opts Object The opts argument passed to createMany. Details Source node_modules/js-data-adapter/src/index.js, line 424 Properties: Name Type Description opts.op String beforeCreateMany beforeDestroy(mapper, id, opts) Lifecycle method method called by destroy. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroy to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroy. Method parameters: Name Type Description mapper Object The mapper argument passed to destroy. id String | Number The id argument passed to destroy. opts Object The opts argument passed to destroy. Details Source node_modules/js-data-adapter/src/index.js, line 444 Properties: Name Type Description opts.op String beforeDestroy beforeDestroyAll(mapper, query, opts) Lifecycle method method called by destroyAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroyAll to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroyAll. Method parameters: Name Type Description mapper Object The mapper argument passed to destroyAll. query Object The query argument passed to destroyAll. opts Object The opts argument passed to destroyAll. Details Source node_modules/js-data-adapter/src/index.js, line 462 Properties: Name Type Description opts.op String beforeDestroyAll beforeFind(mapper, id, opts) Lifecycle method method called by find. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes find to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by find. Method parameters: Name Type Description mapper Object The mapper argument passed to find. id String | Number The id argument passed to find. opts Object The opts argument passed to find. Details Source node_modules/js-data-adapter/src/index.js, line 480 Properties: Name Type Description opts.op String beforeFind beforeFindAll(mapper, query, opts) Lifecycle method method called by findAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes findAll to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by findAll. Method parameters: Name Type Description mapper Object The mapper argument passed to findAll. query Object The query argument passed to findAll. opts Object The opts argument passed to findAll. Details Source node_modules/js-data-adapter/src/index.js, line 498 Properties: Name Type Description opts.op String beforeFindAll beforeSum(mapper, query, opts) Lifecycle method method called by sum. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes sum to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by sum. Method parameters: Name Type Description mapper Object The mapper argument passed to sum. query Object The query argument passed to sum. opts Object The opts argument passed to sum. Details Source node_modules/js-data-adapter/src/index.js, line 516 Properties: Name Type Description opts.op String beforeSum beforeUpdate(mapper, id, props, opts) Lifecycle method method called by update. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes update to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by update. Method parameters: Name Type Description mapper Object The mapper argument passed to update. id String | Number The id argument passed to update. props Object The props argument passed to update. opts Object The opts argument passed to update. Details Source node_modules/js-data-adapter/src/index.js, line 534 Properties: Name Type Description opts.op String beforeUpdate beforeUpdateAll(mapper, props, query, opts) Lifecycle method method called by updateAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateAll to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateAll. Method parameters: Name Type Description mapper Object The mapper argument passed to updateAll. props Object The props argument passed to updateAll. query Object The query argument passed to updateAll. opts Object The opts argument passed to updateAll. Details Source node_modules/js-data-adapter/src/index.js, line 555 Properties: Name Type Description opts.op String beforeUpdateAll beforeUpdateMany(mapper, props, opts) Lifecycle method method called by updateMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateMany to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateMany. Method parameters: Name Type Description mapper Object The mapper argument passed to updateMany. props Array.&lt;Object&gt; The props argument passed to updateMany. opts Object The opts argument passed to updateMany. Details Source node_modules/js-data-adapter/src/index.js, line 576 Properties: Name Type Description opts.op String beforeUpdateMany count(mapper, query, opts) Retrieve the number of records that match the selection query. Called by Mapper#count. Method parameters: Name Type Argument Description mapper Object The mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 606 create(mapper, props, opts) Create a new record. Called by Mapper#create. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The record to be created. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 653 createMany(mapper, props, opts) Create multiple records in a single batch. Called by Mapper#createMany. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The records to be created. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 696 dbg() Shortcut for #log('debug'[, arg1[, arg2[, argn]]]). Details Source node_modules/js-data-adapter/src/index.js, line 596 destroy(mapper, id, opts) Destroy the record with the given primary key. Called by Mapper#destroy. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number Primary key of the record to destroy. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 742 destroyAll(mapper, query, opts) Destroy the records that match the selection query. Called by Mapper#destroyAll. Method parameters: Name Type Argument Description mapper Object the mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 781 find(mapper, id, opts) Retrieve the record with the given primary key. Called by Mapper#find. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number Primary key of the record to retrieve. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. with Array.&lt;String&gt; &lt;optional&gt; [] Relations to eager load. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 869 findAll(mapper, query, opts) Retrieve the records that match the selection query. Method parameters: Name Type Argument Description mapper Object The mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. with Array.&lt;String&gt; &lt;optional&gt; [] Relations to eager load. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 937 getOpt(opt, opts) Resolve the value of the specified option based on the given options and this adapter's settings. Override with care. Method parameters: Name Type Argument Description opt String The name of the option. opts Object &lt;optional&gt; Configuration options. Return value: Type Description * The value of the specified option. Details Source node_modules/js-data-adapter/src/index.js, line 1019 loadBelongsTo() Load a belongsTo relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 827 loadHasMany() Load a hasMany relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1034 loadHasOne() Load a hasOne relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1177 log(level, values) Logging utility method. Override this method if you want to send log messages to something other than the console. Method parameters: Name Type Argument Description level String Log level. values * &lt;repeatable&gt; Values to log. Details Source node_modules/js-data-adapter/src/index.js, line 1200 makeBelongsToForeignKey() Return the foreignKey from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1271 makeHasManyForeignKey() Return the foreignKey from the given record for the provided relationship. There may be reasons why you may want to override this method, like when the id of the parent doesn't exactly match up to the key on the child. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1225 makeHasManyForeignKeys() Return the foreignKeys from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1258 makeHasManyLocalKeys() Return the localKeys from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1241 respond(response, opts) Method parameters: Name Type Description response Object Response object. opts Object Configuration options. return {Object} If opts.raw == true then return response, else return response.data. Details Source node_modules/js-data-adapter/src/index.js, line 1335 sum(mapper, field, query, opts) Retrieve sum of the specified field of the records that match the selection query. Called by Mapper#sum. Method parameters: Name Type Argument Description mapper Object The mapper. field String By to sum. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1284 update(mapper, id, props, opts) Apply the given update to the record with the specified primary key. Called by Mapper#update. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number The primary key of the record to be updated. props Object The update to apply to the record. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1347 updateAll(mapper, props, query, opts) Apply the given update to all records that match the selection query. Called by Mapper#updateAll. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The update to apply to the selected records. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1392 updateMany(mapper, records, opts) Update the given records in a single batch. Called by Mapper#updateMany. Method parameters: Name Type Argument Description mapper Object The mapper. records Array.&lt;Object&gt; The records to update. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1445  Search results Close js-data.io "},"CloudDatastoreAdapter.html":{"id":"CloudDatastoreAdapter.html","title":"Class: CloudDatastoreAdapter","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Class: CloudDatastoreAdapter CloudDatastoreAdapter new CloudDatastoreAdapter(opts) CloudDatastoreAdapter class. Method parameters: Name Type Argument Description opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description debug Boolean &lt;optional&gt; false See Adapter#debug. gcloud Function &lt;optional&gt; See CloudDatastoreAdapter#gcloud. gcloudOpts Object &lt;optional&gt; See CloudDatastoreAdapter#gcloudOpts. Ignored if you provide a pre-configured gcloud instance. raw Boolean &lt;optional&gt; false See Adapter#raw. Details Source src/index.js, line 61 Example // Use Container instead of DataStore on the server import {Container} from 'js-data' import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' // Create a store to hold your Mappers const store = new Container() // Create an instance of CloudDatastoreAdapter with default settings const adapter = new CloudDatastoreAdapter() // Mappers in &quot;store&quot; will use the CloudDatastore adapter by default store.registerAdapter('datastore', adapter, { default: true }) // Create a Mapper that maps to a &quot;user&quot; table store.defineMapper('user') // Use Container instead of DataStore on the server import {Container} from 'js-data' import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' // Create a store to hold your Mappers const store = new Container() // Create an instance of CloudDatastoreAdapter with default settings const adapter = new CloudDatastoreAdapter() // Mappers in &quot;store&quot; will use the CloudDatastore adapter by default store.registerAdapter('datastore', adapter, { default: true }) // Create a Mapper that maps to a &quot;user&quot; table store.defineMapper('user') Extends This class extends the Adapter class. Members datastore Instance of gcloud.datastore used by this adapter. Use this directly when you need to write custom queries. Details Type Source Object src/index.js, line 96 debug Whether to log debugging information. Details Type Default value Source Boolean false node_modules/js-data-adapter/src/index.js, line 42 Inherited From: Adapter#debug gcloud The gcloud instance used by this adapter. Use this directly when you need to write custom queries. Details Type Source Object src/index.js, line 108 gcloudOpts Options to be passed to a new gcloud instance, if one wasn't provided. Details Type Default value Source Object {} src/index.js, line 123 Properties: Name Type Description projectId String Google Cloud Platform project id. operators Override the default predicate functions for the specified operators. Details Type Default value Source Object {} src/index.js, line 134 raw Whether to return a more detailed response object. Details Type Default value Source Boolean false node_modules/js-data-adapter/src/index.js, line 51 Inherited From: Adapter#raw Methods &lt;static&gt; extend(instanceProps, classProps) Alternative to ES6 class syntax for extending CloudDatastoreAdapter. Method parameters: Name Type Argument Description instanceProps Object &lt;optional&gt; Properties that will be added to the prototype of the subclass. classProps Object &lt;optional&gt; Properties that will be added as static properties to the subclass itself. Return value: Type Description Constructor Subclass of CloudDatastoreAdapter. Details Source src/index.js, line 163 Examples Try it out class MyCloudDatastoreAdapter extends CloudDatastoreAdapter {...} const adapter = new MyCloudDatastoreAdapter() class MyCloudDatastoreAdapter extends CloudDatastoreAdapter {...} const adapter = new MyCloudDatastoreAdapter() CloudDatastoreAdapter.extend.&quot;&gt; CloudDatastoreAdapter.extend.')&quot;&gt;Try it out CloudDatastoreAdapter.extend.&quot;&gt;var instanceProps = {...} var classProps = {...} var MyCloudDatastoreAdapter = CloudDatastoreAdapter.extend(instanceProps, classProps) var adapter = new MyCloudDatastoreAdapter() CloudDatastoreAdapter.extend.&quot; style=&quot;display: none;&quot;&gt; var instanceProps = {...} var classProps = {...} var MyCloudDatastoreAdapter = CloudDatastoreAdapter.extend(instanceProps, classProps) var adapter = new MyCloudDatastoreAdapter() afterCount(mapper, props, opts, response) Lifecycle method method called by count. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes count to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the count. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by count. Method parameters: Name Type Description mapper Object The mapper argument passed to count. props Object The props argument passed to count. opts Object The opts argument passed to count. response Object | Response Count or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 130 Properties: Name Type Description opts.op String afterCount Inherited From: Adapter#afterCount afterCreate(mapper, props, opts, response) Lifecycle method method called by create. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes create to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the created record. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by create. Method parameters: Name Type Description mapper Object The mapper argument passed to create. props Object The props argument passed to create. opts Object The opts argument passed to create. response Object | Response Created record or Response, depending on the value of opts.raw. Details Source Overrides node_modules/js-data-adapter/src/index.js, line 153 Adapter#afterCreate Properties: Name Type Description opts.op String afterCreate Inherited From: Adapter#afterCreate afterDestroy(mapper, id, opts, response) Lifecycle method method called by destroy. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroy to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be undefined. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroy. Method parameters: Name Type Description mapper Object The mapper argument passed to destroy. id String | Number The id argument passed to destroy. opts Object The opts argument passed to destroy. response undefined | Response undefined or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 199 Properties: Name Type Description opts.op String afterDestroy Inherited From: Adapter#afterDestroy afterDestroyAll(mapper, query, opts, response) Lifecycle method method called by destroyAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroyAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be undefined. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroyAll. Method parameters: Name Type Description mapper Object The mapper argument passed to destroyAll. query Object The query argument passed to destroyAll. opts Object The opts argument passed to destroyAll. response undefined | Response undefined or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 222 Properties: Name Type Description opts.op String afterDestroyAll Inherited From: Adapter#afterDestroyAll afterFind(mapper, id, opts, response) Lifecycle method method called by find. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes find to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the found record, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by find. Method parameters: Name Type Description mapper Object The mapper argument passed to find. id String | Number The id argument passed to find. opts Object The opts argument passed to find. response Object | Response The found record or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 245 Properties: Name Type Description opts.op String afterFind Inherited From: Adapter#afterFind afterFindAll(mapper, query, opts, response) Lifecycle method method called by findAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes findAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the found records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by findAll. Method parameters: Name Type Description mapper Object The mapper argument passed to findAll. query Object The query argument passed to findAll. opts Object The opts argument passed to findAll. response Array.&lt;Object&gt; | Response The found records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 268 Properties: Name Type Description opts.op String afterFindAll Inherited From: Adapter#afterFindAll afterSum(mapper, field, query, opts, response) Lifecycle method method called by sum. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes sum to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the sum. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by sum. Method parameters: Name Type Description mapper Object The mapper argument passed to sum. field String The field argument passed to sum. query Object The query argument passed to sum. opts Object The opts argument passed to sum. response Object | Response Count or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 291 Properties: Name Type Description opts.op String afterSum Inherited From: Adapter#afterSum afterUpdate(mapper, id, props, opts, response) Lifecycle method method called by update. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes update to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated record. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by update. Method parameters: Name Type Description mapper Object The mapper argument passed to update. id String | Number The id argument passed to update. props Object The props argument passed to update. opts Object The opts argument passed to update. response Object | Response The updated record or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 315 Properties: Name Type Description opts.op String afterUpdate Inherited From: Adapter#afterUpdate afterUpdateAll(mapper, props, query, opts, response) Lifecycle method method called by updateAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateAll to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateAll. Method parameters: Name Type Description mapper Object The mapper argument passed to updateAll. props Object The props argument passed to updateAll. query Object The query argument passed to updateAll. opts Object The opts argument passed to updateAll. response Array.&lt;Object&gt; | Response The updated records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 339 Properties: Name Type Description opts.op String afterUpdateAll Inherited From: Adapter#afterUpdateAll afterUpdateMany(mapper, records, opts, response) Lifecycle method method called by updateMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateMany to wait for the Promise to resolve before continuing. If opts.raw is true then response will be a detailed response object, otherwise response will be the updated records, if any. response may be modified. You can also re-assign response to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateMany. Method parameters: Name Type Description mapper Object The mapper argument passed to updateMany. records Array.&lt;Object&gt; The records argument passed to updateMany. opts Object The opts argument passed to updateMany. response Array.&lt;Object&gt; | Response The updated records or Response, depending on the value of opts.raw. Details Source node_modules/js-data-adapter/src/index.js, line 363 Properties: Name Type Description opts.op String afterUpdateMany Inherited From: Adapter#afterUpdateMany beforeCount(mapper, query, opts) Lifecycle method method called by count. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes count to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by count. Method parameters: Name Type Description mapper Object The mapper argument passed to count. query Object The query argument passed to count. opts Object The opts argument passed to count. Details Source node_modules/js-data-adapter/src/index.js, line 386 Properties: Name Type Description opts.op String beforeCount Inherited From: Adapter#beforeCount beforeCreate(mapper, props, opts) Lifecycle method method called by create. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes create to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by create. Method parameters: Name Type Description mapper Object The mapper argument passed to create. props Object The props argument passed to create. opts Object The opts argument passed to create. Details Source node_modules/js-data-adapter/src/index.js, line 404 Properties: Name Type Description opts.op String beforeCreate Inherited From: Adapter#beforeCreate beforeCreateMany(mapper, props, opts) Lifecycle method method called by createMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes createMany to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by createMany. Method parameters: Name Type Description mapper Object The mapper argument passed to createMany. props Array.&lt;Object&gt; The props argument passed to createMany. opts Object The opts argument passed to createMany. Details Source node_modules/js-data-adapter/src/index.js, line 424 Properties: Name Type Description opts.op String beforeCreateMany Inherited From: Adapter#beforeCreateMany beforeDestroy(mapper, id, opts) Lifecycle method method called by destroy. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroy to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroy. Method parameters: Name Type Description mapper Object The mapper argument passed to destroy. id String | Number The id argument passed to destroy. opts Object The opts argument passed to destroy. Details Source node_modules/js-data-adapter/src/index.js, line 444 Properties: Name Type Description opts.op String beforeDestroy Inherited From: Adapter#beforeDestroy beforeDestroyAll(mapper, query, opts) Lifecycle method method called by destroyAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes destroyAll to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by destroyAll. Method parameters: Name Type Description mapper Object The mapper argument passed to destroyAll. query Object The query argument passed to destroyAll. opts Object The opts argument passed to destroyAll. Details Source node_modules/js-data-adapter/src/index.js, line 462 Properties: Name Type Description opts.op String beforeDestroyAll Inherited From: Adapter#beforeDestroyAll beforeFind(mapper, id, opts) Lifecycle method method called by find. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes find to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by find. Method parameters: Name Type Description mapper Object The mapper argument passed to find. id String | Number The id argument passed to find. opts Object The opts argument passed to find. Details Source node_modules/js-data-adapter/src/index.js, line 480 Properties: Name Type Description opts.op String beforeFind Inherited From: Adapter#beforeFind beforeFindAll(mapper, query, opts) Lifecycle method method called by findAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes findAll to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by findAll. Method parameters: Name Type Description mapper Object The mapper argument passed to findAll. query Object The query argument passed to findAll. opts Object The opts argument passed to findAll. Details Source node_modules/js-data-adapter/src/index.js, line 498 Properties: Name Type Description opts.op String beforeFindAll Inherited From: Adapter#beforeFindAll beforeSum(mapper, query, opts) Lifecycle method method called by sum. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes sum to wait for the Promise to resolve before continuing. A thrown error or rejected Promise will bubble up and reject the Promise returned by sum. Method parameters: Name Type Description mapper Object The mapper argument passed to sum. query Object The query argument passed to sum. opts Object The opts argument passed to sum. Details Source node_modules/js-data-adapter/src/index.js, line 516 Properties: Name Type Description opts.op String beforeSum Inherited From: Adapter#beforeSum beforeUpdate(mapper, id, props, opts) Lifecycle method method called by update. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes update to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by update. Method parameters: Name Type Description mapper Object The mapper argument passed to update. id String | Number The id argument passed to update. props Object The props argument passed to update. opts Object The opts argument passed to update. Details Source node_modules/js-data-adapter/src/index.js, line 534 Properties: Name Type Description opts.op String beforeUpdate Inherited From: Adapter#beforeUpdate beforeUpdateAll(mapper, props, query, opts) Lifecycle method method called by updateAll. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateAll to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateAll. Method parameters: Name Type Description mapper Object The mapper argument passed to updateAll. props Object The props argument passed to updateAll. query Object The query argument passed to updateAll. opts Object The opts argument passed to updateAll. Details Source node_modules/js-data-adapter/src/index.js, line 555 Properties: Name Type Description opts.op String beforeUpdateAll Inherited From: Adapter#beforeUpdateAll beforeUpdateMany(mapper, props, opts) Lifecycle method method called by updateMany. Override this method to add custom behavior for this lifecycle hook. Returning a Promise causes updateMany to wait for the Promise to resolve before continuing. props may be modified. You can also re-assign props to another value by returning a different value or a Promise that resolves to a different value. A thrown error or rejected Promise will bubble up and reject the Promise returned by updateMany. Method parameters: Name Type Description mapper Object The mapper argument passed to updateMany. props Array.&lt;Object&gt; The props argument passed to updateMany. opts Object The opts argument passed to updateMany. Details Source node_modules/js-data-adapter/src/index.js, line 576 Properties: Name Type Description opts.op String beforeUpdateMany Inherited From: Adapter#beforeUpdateMany count(mapper, query, opts) Retrieve the number of records that match the selection query. Called by Mapper#count. Method parameters: Name Type Argument Description mapper Object The mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 606 Inherited From: Adapter#count create(mapper, props, opts) Create a new record. Called by Mapper#create. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The record to be created. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 653 Inherited From: Adapter#create createMany(mapper, props, opts) Create multiple records in a single batch. Called by Mapper#createMany. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The records to be created. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 696 Inherited From: Adapter#createMany dbg() Shortcut for #log('debug'[, arg1[, arg2[, argn]]]). Details Source node_modules/js-data-adapter/src/index.js, line 596 Inherited From: Adapter#dbg destroy(mapper, id, opts) Destroy the record with the given primary key. Called by Mapper#destroy. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number Primary key of the record to destroy. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 742 Inherited From: Adapter#destroy destroyAll(mapper, query, opts) Destroy the records that match the selection query. Called by Mapper#destroyAll. Method parameters: Name Type Argument Description mapper Object the mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 781 Inherited From: Adapter#destroyAll filterQuery(mapper, query, opts) Apply the specified selection query to the provided Datastore query. Method parameters: Name Type Argument Description mapper Object The mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Description operators Object &lt;optional&gt; Override the default predicate functions for specified operators. Details Source src/index.js, line 188 find(mapper, id, opts) Retrieve the record with the given primary key. Called by Mapper#find. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number Primary key of the record to retrieve. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. with Array.&lt;String&gt; &lt;optional&gt; [] Relations to eager load. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 869 Inherited From: Adapter#find findAll(mapper, query, opts) Retrieve the records that match the selection query. Method parameters: Name Type Argument Description mapper Object The mapper. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. with Array.&lt;String&gt; &lt;optional&gt; [] Relations to eager load. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 937 Inherited From: Adapter#findAll getKind(mapper, opts) Resolve the Cloud Datastore kind for the specified Mapper with the given options. Method parameters: Name Type Argument Description mapper Object The mapper. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Description kind Object &lt;optional&gt; Datastore kind. Return value: Type Description String The kind. Details Source src/index.js, line 657 getOperator(operator, opts) Resolve the predicate function for the specified operator based on the given options and this adapter's settings. Method parameters: Name Type Argument Description operator String The name of the operator. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Description operators Object &lt;optional&gt; Override the default predicate functions for specified operators. Return value: Type Description * The predicate function for the specified operator. Details Source src/index.js, line 672 getOpt(opt, opts) Resolve the value of the specified option based on the given options and this adapter's settings. Override with care. Method parameters: Name Type Argument Description opt String The name of the option. opts Object &lt;optional&gt; Configuration options. Return value: Type Description * The value of the specified option. Details Source node_modules/js-data-adapter/src/index.js, line 1019 Inherited From: Adapter#getOpt loadBelongsTo() Load a belongsTo relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 827 Inherited From: Adapter#loadBelongsTo loadHasMany() Load a hasMany relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1034 Inherited From: Adapter#loadHasMany loadHasOne() Load a hasOne relationship. Override with care. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1177 Inherited From: Adapter#loadHasOne log(level, values) Logging utility method. Override this method if you want to send log messages to something other than the console. Method parameters: Name Type Argument Description level String Log level. values * &lt;repeatable&gt; Values to log. Details Source node_modules/js-data-adapter/src/index.js, line 1200 Inherited From: Adapter#log makeBelongsToForeignKey() Return the foreignKey from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1271 Inherited From: Adapter#makeBelongsToForeignKey makeHasManyForeignKey() Return the foreignKey from the given record for the provided relationship. There may be reasons why you may want to override this method, like when the id of the parent doesn't exactly match up to the key on the child. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1225 Inherited From: Adapter#makeHasManyForeignKey makeHasManyForeignKeys() Return the foreignKeys from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1258 Inherited From: Adapter#makeHasManyForeignKeys makeHasManyLocalKeys() Return the localKeys from the given record for the provided relationship. Override with care. Return value: Type Description * Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1241 Inherited From: Adapter#makeHasManyLocalKeys respond(response, opts) Method parameters: Name Type Description response Object Response object. opts Object Configuration options. return {Object} If opts.raw == true then return response, else return response.data. Details Source node_modules/js-data-adapter/src/index.js, line 1335 Inherited From: Adapter#respond sum(mapper, field, query, opts) Retrieve sum of the specified field of the records that match the selection query. Called by Mapper#sum. Method parameters: Name Type Argument Description mapper Object The mapper. field String By to sum. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1284 Inherited From: Adapter#sum update(mapper, id, props, opts) Apply the given update to the record with the specified primary key. Called by Mapper#update. Method parameters: Name Type Argument Description mapper Object The mapper. id String | Number The primary key of the record to be updated. props Object The update to apply to the record. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1347 Inherited From: Adapter#update updateAll(mapper, props, query, opts) Apply the given update to all records that match the selection query. Called by Mapper#updateAll. Method parameters: Name Type Argument Description mapper Object The mapper. props Object The update to apply to the selected records. query Object &lt;optional&gt; Selection query. Properties Name Type Argument Description where Object &lt;optional&gt; Filtering criteria. orderBy String | Array &lt;optional&gt; Sorting criteria. sort String | Array &lt;optional&gt; Same as query.sort. limit Number &lt;optional&gt; Limit results. skip Number &lt;optional&gt; Offset results. offset Number &lt;optional&gt; Same as query.skip. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1392 Inherited From: Adapter#updateAll updateMany(mapper, records, opts) Update the given records in a single batch. Called by Mapper#updateMany. Method parameters: Name Type Argument Description mapper Object The mapper. records Array.&lt;Object&gt; The records to update. opts Object &lt;optional&gt; Configuration options. Properties Name Type Argument Default Description raw Boolean &lt;optional&gt; false Whether to return a more detailed response object. Return value: Type Description Promise Unspecified Details Source node_modules/js-data-adapter/src/index.js, line 1445 Inherited From: Adapter#updateMany  Search results Close js-data.io "},"module-js-data-cloud-datastore.html":{"id":"module-js-data-cloud-datastore.html","title":"Module: js-data-cloud-datastore","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Module: js-data-cloud-datastore Registered as js-data-cloud-datastore in NPM. Details Source src/index.js, line 731 Examples Try it out npm i --save js-data-cloud-datastore@beta js-data@beta gcloud npm i --save js-data-cloud-datastore@beta js-data@beta gcloud Try it out import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' const adapter = new CloudDatastoreAdapter() import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' const adapter = new CloudDatastoreAdapter() Try it out var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter var adapter = new CloudDatastoreAdapter() var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter var adapter = new CloudDatastoreAdapter() Members &lt;static&gt; CloudDatastoreAdapter CloudDatastoreAdapter class. Details Type Source See Constructor src/index.js, line 715 CloudDatastoreAdapter Examples Try it out import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' const adapter = new CloudDatastoreAdapter() import {CloudDatastoreAdapter} from 'js-data-cloud-datastore' const adapter = new CloudDatastoreAdapter() Try it out var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter var adapter = new CloudDatastoreAdapter() var CloudDatastoreAdapter = require('js-data-cloud-datastore').CloudDatastoreAdapter var adapter = new CloudDatastoreAdapter() &lt;static&gt; OPERATORS Default predicate functions for the filtering operators. Details Source src/index.js, line 34 Properties: Name Type Description == Function Equality operator. &gt; Function &quot;Greater than&quot; operator. &gt;= Function &quot;Greater than or equal to&quot; operator. &lt; Function &quot;Less than&quot; operator. Function &quot;Less than or equal to&quot; operator. &lt;static&gt; version Details of the current version of the js-data-cloud-datastore module. Details Type Source Object src/index.js, line 691 Properties: Name Type Description version.full String The full semver value. version.major Number The major version number. version.minor Number The minor version number. version.patch Number The patch version number. version.alpha String | Boolean The alpha version value, otherwise false if the current version is not alpha. version.beta String | Boolean The beta version value, otherwise false if the current version is not beta. Examples Try it out import {version} from 'js-data-cloud-datastore' console.log(version.full) import {version} from 'js-data-cloud-datastore' console.log(version.full) Try it out var version = require('js-data-cloud-datastore').version console.log(version.full) var version = require('js-data-cloud-datastore').version console.log(version.full)  Search results Close js-data.io "},"Response.html":{"id":"Response.html","title":"Class: Response","body":" js-data-cloud-datastore Modules js-data-cloud-datastore Classes AdapterCloudDatastoreAdapterResponse Class: Response Response new Response() Response object used when raw is true. May contain other fields in addition to data. Details Source node_modules/js-data-adapter/src/index.js, line 87 Members data Response data. Details Type Source * node_modules/js-data-adapter/src/index.js, line 97 op The operation for which the response was created. Details Type Source String node_modules/js-data-adapter/src/index.js, line 107  Search results Close js-data.io "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
